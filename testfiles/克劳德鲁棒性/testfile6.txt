// test6_deep_recursion_sum.sy - 深度递归求和测试
int g_depth = 0;
int g_max_depth = 0;

int deep_sum(int n) {
    g_depth = g_depth + 1;
    if (g_depth > g_max_depth) {
        g_max_depth = g_depth;
    }
    
    int result;
    if (n <= 0) {
        result = 0;
    } else {
        result = n + deep_sum(n - 1);
    }
    
    g_depth = g_depth - 1;
    return result;
}

int sum_of_sums(int n) {
    int i;
    int total = 0;
    for (i = 1; i <= n; i = i + 1) {
        total = total + deep_sum(i);
    }
    return total;
}

int main() {
    printf("deep_sum(10) = %d\n", deep_sum(10));  // 55
    printf("max_depth = %d\n", g_max_depth);       // 11
    
    g_max_depth = 0;
    printf("deep_sum(50) = %d\n", deep_sum(50));  // 1275
    printf("max_depth = %d\n", g_max_depth);       // 51
    
    g_max_depth = 0;
    printf("sum_of_sums(5) = %d\n", sum_of_sums(5));  // 1+3+6+10+15 = 35
    printf("max_depth = %d\n", g_max_depth);
    
    return 0;
}

// test35_power_function.sy - 幂函数（快速幂）
int power_naive(int base, int exp) {
    int result;
    int i;
    result = 1;
    for (i = 0; i < exp; i = i + 1) {
        result = result * base;
    }
    return result;
}

int power_fast(int base, int exp) {
    int result;
    result = 1;
    for ( ; exp > 0; exp = exp / 2) {
        if (exp % 2 == 1) {
            result = result * base;
        }
        base = base * base;
    }
    return result;
}

int power_recursive(int base, int exp) {
    int half;
    if (exp == 0) {
        return 1;
    }
    if (exp == 1) {
        return base;
    }
    half = power_recursive(base, exp / 2);
    if (exp % 2 == 0) {
        return half * half;
    }
    return half * half * base;
}

int main() {
    int bases[5] = {2, 3, 5, 7, 10};
    int exps[5] = {0, 1, 5, 10, 3};
    int i;
    
    for (i = 0; i < 5; i = i + 1) {
        int b, e;
        b = bases[i];
        e = exps[i];
        printf("%d^%d: naive=%d fast=%d recursive=%d\n",
               b, e, power_naive(b, e), power_fast(b, e), power_recursive(b, e));
    }
    
    // 特殊测试
    printf("2^10 = %d\n", power_fast(2, 10));  // 1024
    printf("3^7 = %d\n", power_fast(3, 7));    // 2187
    printf("5^5 = %d\n", power_fast(5, 5));    // 3125
    
    return 0;
}

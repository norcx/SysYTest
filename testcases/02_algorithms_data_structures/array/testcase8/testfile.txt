// test8 - 全局数组、局部数组、static数组混合使用
int g_arr[30] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30};

int process_arrays(int param_arr[], int n) {
    static int s_arr[20] = {100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119};
    int local_arr[25];
    int i;
    int sum = 0;
    
    // 初始化局部数组
    for (i = 0; i < 25; i = i + 1) {
        local_arr[i] = i * 1000;
    }
    
    // 混合访问
    for (i = 0; i < n; i = i + 1) {
        sum = sum + g_arr[i % 30];
        sum = sum + s_arr[i % 20];
        sum = sum + local_arr[i % 25];
        sum = sum + param_arr[i];
    }
    
    // 修改static数组
    s_arr[0] = s_arr[0] + 1;
    
    return sum;
}

int main() {
    int my_arr[15] = {1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000};
    
    printf("Call 1: %d\n", process_arrays(my_arr, 10));
    printf("Call 2: %d\n", process_arrays(my_arr, 10));
    printf("Call 3: %d\n", process_arrays(my_arr, 10));
    
    // 验证全局数组未被意外修改
    printf("g_arr[0] = %d\n", g_arr[0]);
    printf("g_arr[29] = %d\n", g_arr[29]);
    
    return 0;
}
